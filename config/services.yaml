# This file is the entry point to configure your own services.
# Files in the packages/ subdirectory configure your dependencies.

# Put parameters here that don't need to change on each machine where the app is deployed
# https://symfony.com/doc/current/best_practices.html#use-parameters-for-application-configuration
parameters:
  app.api_key: '%env(API_KEY)%'

services:
  # default configuration for services in *this* file
  _defaults:
    autowire: true # Automatically injects dependencies in your services.
    autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.

  DriveManager\Infrastructure\Api\V1\DropFileController:  
    autowire: true
    arguments:
      $repository: '@drivemanager.repository'
      $dropFileInterface: '@drivemanager.DropFileInterface'
      
  drivemanager.repository:
    public: true
    autowire: true
    class: DriveManager\Infrastructure\Persistence\File\FileRepositoryDoctrine
    
  # drivemanager.DropFileInterface:
  #   public: true
  #   autowire: true
  #   class: DriveManager\Infrastructure\DriveProvider\DropFileNextcloud
  #   arguments:
  #     $baseUri: 'https://nuage.logipro.com/owncloud/remote.php/dav/'
  #     $mailAddress: 'romain.malosse@logipro.com'
  #     $password: 'APIKEY'
  #     $fileId: 'unIdDeTest'


  # Correction ici: aliaser l'interface vers l'impl√©mentation
  DriveManager\Application\Service\DropFile\DropFileInterface: "@drivemanager.DropFileInterface"
  
  DriveManager\Domain\Model\File\FileRepositoryInterface: "@drivemanager.repository"

  DriveManager\Infrastructure\Api\V1\:
    resource: "../src/Infrastructure/Api/V1/"
    tags: ["controller.service_arguments"]
